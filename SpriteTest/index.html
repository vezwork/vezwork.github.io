<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Title</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="vez">

    <meta name="robots" content="index, follow">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <meta name="theme-color" content="#BAE">

    <link rel="shortcut icon" href="">
    <link rel="stylesheet" href="assets/style.css">
    <script src="assets/script.js"></script>
    

    <meta name="viewport" content="width=device-width, initial-scale=1">
    
 </head>

<body>
    <canvas width="400" height="400" id="canvas"></canvas>
    <script>
        const pool = new ImageLoadPool()
        const img1 = pool.addImage('http://vignette2.wikia.nocookie.net/minecraft/images/f/f0/Minecraft_Items.png/revision/latest?cb=20140102042917')
        const img2 = pool.addImage('https://tcrf.net/images/thumb/b/bf/Undertale_toby_dog.gif/50px-Undertale_toby_dog.gif')
        const img3 = pool.addImage('http://www.mariowiki.com/images/e/ee/Ludwig_Idle.gif')  
        pool.start()
        
        pool.onComplete = () => {
            
            const renderLoop = new RenderLoop(document.getElementById("canvas"))
            const input = new Input(document.getElementById("canvas"))

            renderLoop.addDrawable("mc", new Sprite(new SpriteSheet(img1, 16, 16), 32, 32, 0, 64, 64, 0),3)
                      .addDrawable("doggy", new Sprite(img2, 150, 150), 4)
                      .addDrawable("ludwig", new Sprite(img3, 50, 50), 0)
                      .addDrawable("text", new simpleText("yo what up son", 200, 200, 0.1), 0)
                      .addDrawable("text", new simpleText("press left and right", 110, 240, -0.1, "30px Comic Sans MS", "blue"), 0)
                      
            renderLoop.onDrawStart = function() {
                if (input.checkKey('arrowleft') || input.checkKey('a')) {
                    renderLoop.getDrawable("ludwig").x -=2
                    renderLoop.getDrawable("ludwig").rot -= .2
                }
                if (input.checkKey('arrowright') || input.checkKey('d')) {
                    renderLoop.getDrawable("ludwig").x +=2
                    renderLoop.getDrawable("ludwig").rot += .2
                }
                
                renderLoop.getDrawable("mc").height += 0.2
            }
            
            input.onMouse("down", (a)=>{
                console.log(input.mousePos.x, input.mousePos.y, input.checkKey('b'))
            }, 'left')
        }
    </script>
</body>
</html>